extends layout

block content

  br
  br
  .container
    .row
      .col-xs-6
        h4 Choose a #{__('Data Source')}
        hr

        a#popup_NYT(href='#')
          .card(class = "card text-left")
            .row
              .col-xs-4
                img(src="/images/nyt.png")
              .col-xs-8(style = 'margin-top:5px')
                .card-body
                  br
                  p New York Times Articles
                  p(class="small") Click here to choose a category from New York Times Website

        a#popup_SP(href='#')
          .card(class = "card text-left")
            .row
              .col-xs-4
                img(src="/images/ws.jpg")
              .col-xs-8(style = 'margin-top:5px')
                .card-body
                  br
                  p Shakespeare Play
                  p(class="small") Choose from a list of most-quoted lines from Shakespeare play:  Hamlet, Macbeth, A Midsummer Night's Dream.
      
      .col-xs-6
        h4 Or Input #{__('here')}
        hr
        br
        .well#well1
          form.form-horizontal

            .form-group
              label.col-sm-2.control-label(for='data') #{__('Data')}:
              .col-sm-10
                textarea#data.form-control(rows='5', oninput='$("#hash").val(sha256())', onclick='$("#hash").val(sha256())')

            .form-group
              label.col-sm-2.control-label(for='hash') #{__('Hash')}:
              .col-sm-10
                input#hash.form-control(type='text', disabled)

  center
    .button(id="addHashButton" class = "btn btn-primary") Save


  .container 
    .row
      .col-xs-6
        h4 Hash #{__('History')}
        p.small Press the save button to save the hash results.
        hr
        br
        ul(id="hash-list", class = 'list-unstyled hash-text')


  script.
    function getText(block, chain) {
      return $('#data').val();
    }

    //$("#hash").val(sha256());

    document.getElementById('popup_NYT').addEventListener('click', function(){
      window['output'] = document.getElementById('data');
      window.open('/popup_NYT', '_blank', 'toolbar=no,menubar=no,scrollbars=yes,width=1200,height=900')
    });

    document.getElementById('popup_SP').addEventListener('click', function(){
      window['output'] = document.getElementById('data');
      window.open('/popup_SP', '_blank', 'toolbar=no,menubar=no,scrollbars=yes,width=1200,height=900')
    });


    $("#addHashButton").click(function(e) {
      e.preventDefault();
      var li = document.createElement("li");
      
      collapseId = "collapse" + Date.now();

      var collapsedDiv = document.createElement("div");
      collapsedDiv.setAttribute("id", collapseId);
      
      var inputWell = document.createElement("div");
      inputWell.className += "well input-well";

      inputWell.style.width = '500px';

      var inputArea = document.createElement("textarea");
      inputArea.className="form-control";
      inputArea.setAttribute("disabled", true);
      inputArea.setAttribute("rows",10);
      inputArea.value = $("#data").val();

      //inputWell.appendChild(inputArea);

      collapsedDiv.appendChild(inputWell);

      li.setAttribute("data-toggle", "collapse");
      li.setAttribute("data-target", "#" + collapseId);
      
      var newHashVal = document.createTextNode($("#hash").val());
      //newHashVal.style.width = '200px';

      inputWell.appendChild(newHashVal);
      li.appendChild(collapsedDiv);
      $("#hash-list").append(li);
      $(".input-well").click(function(e) {
        e.stopPropagation();
      })
    });

